using GPTProject.Providers.Dialogs.Implementations;
using GPTProject.Providers.Vectorizers.Implementation;
using GPTProject.Testing.Evaluation;
using GPTProject.Testing.Metrics;

namespace GPTProject.Testing
{
	public static class MetricTest
	{
		public static async Task Run()
		{
			var segmentItems = GetSegmentData();
			var classicItems = GetClassicData();

			var runner = new Runner
			(
				new BERTScore(),
				new SemanticSimilarityScore(new ChatGPTVectorizer()),
				new LLMAsJudgeScore(new ChatGPTDialog())
			);

			var resultSeg = await runner.EvaluateAsync(segmentItems);
			Console.WriteLine("Segment score result");
			Console.WriteLine(resultSeg);

			Console.WriteLine();

			var resultClas = await runner.EvaluateAsync(classicItems);
			Console.WriteLine("Classic Score Result");
			Console.WriteLine(resultClas);
		}

		#region TestData
		public static List<TestItem> GetClassicData()
		{
			return new List<TestItem>
{
				new TestItem
				{
					Question = "Сколько весил трицератопс?",
					Generated = "Трицератопс мог весить от 60 до 120 тонн.",
					Reference = "Трицератопс весил от 60 до 120 тонн."
				},
				//Токенов затрачено: 5797,
				new TestItem
				{
					Question = "В каком периоде жил аллозавр?",
					Generated = "Аллозавр жил в позднем юрском периоде, около 155-145 миллионов лет назад.",
					Reference = "Аллозавр жил в юрском периоде около 155-145 миллионов лет назад."
				},
				//Токенов затрачено: 4470,
				new TestItem
				{
					Question = "Какой рацион у орнитолеста?",
					Generated = "Рацион орнитолестеса включал мелких ящериц, млекопитающих, лягушек, саламандр, ринхоцефалов и птенцов динозавров. Некоторые исследователи предполагают, что он мог питаться рыбой.",
					Reference = "Орнитолест ел  мелких животных и насекомых: лягушек, мелких ящериц, ринхоцефалов, птенцов динозавров, саламандр и, возможно, мог питаться рыбой."
				},
				//Токенов затрачено: 4236,
				new TestItem
				{
					Question = "Был ли целофизис быстрым хищником?",
					Generated = "Да, целофизис был быстрым и очень подвижным двуногим хищником.",
					Reference = "Да, целофизис был быстрым и ловким хищником."
				},
				//Токенов затрачено: 4289,
				new TestItem
				{
					Question = "Сколько метров достигал алиорам?",
					Generated = "Согласно первичному описанию Сергея Курзанова от 1976 года, алиорам достигал от 5 до 6 метров в длину.",
					Reference = "Алиорам достигал длины около 5-6 метров."
				},
				//Токенов затрачено: 3953,
				new TestItem
				{
					Question = "У трицератопса были рога?",
					Generated = "Да, у трицератопса были рога. У него было три рога: один небольшой рог на носу и ещё два над глазами.",
					Reference = "Да, трицератопс имел три рога на голове. Один на носу и два над глазами"
				},
				//Токенов затрачено: 4436,
				new TestItem
				{
					Question = "Коротко расскажи о трицератопсе",
					Generated = "Трицератопс - это крупный растительноядный динозавр, обитавший в меловом периоде на территории Северной Америки. Он отличался огромным черепом с тремя рогами и воротником на шее. Его размеры достигали 8-9 метров в длину и до 3 метров в высоту, вес мог составлять 60-120 тонн. Трицератопсы были широко распространены и считаются одними из самых распространенных растительноядных динозавров своего времени.",
					Reference = "Трицератопс был большим травоядным динозавром, жившим в меловом периоде на территории современной Северной Америки. Он выделялся массивной головой с тремя рогами и костяным воротником, прикрывающим шею. Длина трицератопса могла достигать 8–9 метров, высота около 3 метров, а вес — от 60 до 120 тонн. Это были одни из самых распространённых растительноядных динозавров своего периода."
				},
				//Токенов затрачено: 4533,
				new TestItem
				{
					Question = "Какую длину достигал аллозавр?",
					Generated = "Аллозавр достигал длины около 7,5 метров",
					Reference = "Аллозавр достигал длины примерно 7,5 метров."
				},
				//Токенов затрачено: 4464,
				new TestItem
				{
					Question = "Что ты знаешь о динозаврах?",
					Generated = "Я обладаю информацией о нескольких видах динозавров, включая алиорама и орнитолестеса. Хотите узнать подробности о конкретном виде?",
					Reference = "У меня есть сведения о нескольких видах динозавров. О каком-то из них вы хотите узнать подробности?"
				},
				//Токенов затрачено: 5253,
				new TestItem
				{
					Question = "Расскажи о тиранозавре",
					Generated = "База знаний не содержит информации о тиранозавре.",
					Reference = "База знаний не содержит информации о тиранозавре."
				},
				//Токенов затрачено: 3923
				};
		}
		public static List<TestItem> GetSegmentData()
		{
			return new List<TestItem>
				{
				new TestItem
				{
					Question = "Сколько весил трицератопс?",
					Generated = "Вес взрослого Трицератопса (Triceratops) составлял примерно от 6 до 12 тонн в зависимости от конкретного экземпляра и возраста.",
					Reference = "Трицератопс весил от 60 до 120 тонн."
				},
				//Токенов затрачено: 7767,
				new TestItem
				{
					Question = "В каком периоде жил аллозавр?",
					Generated = "Аллозавр жил в позднем юрском периоде, примерно 155-145 миллионов лет назад.",
					Reference = "Аллозавр жил в юрском периоде около 155-145 миллионов лет назад."
				},
				//Токенов затрачено: 7778,
				new TestItem
				{
					Question = "Какой рацион у орнитолеста?",
					Generated = "Рацион орнитолестеса включал мелких наземных позвоночных, таких как:  - Мелкие ящерицы; - Млекопитающие; - Лягушки; - Саламандры; - Ринхоцефалы (рептилоидные земноводные); - Птенцы динозавров.  Также предполагалось, что орнитолестес мог использовать свои конические передние зубы для ловли рыбы, однако это утверждение основано скорее на предположении, нежели на точных данных.",
					Reference = "Орнитолест ел  мелких животных и насекомых: лягушек, мелких ящериц, ринхоцефалов, птенцов динозавров, саламандр и, возможно, мог питаться рыбой."
				},
				//Токенов затрачено: 7877,
				new TestItem
				{
					Question = "Был ли целофизис быстрым хищником?",
					Generated = "Да, целофизис (Coelophysis) был быстрым и очень подвижным хищным динозавром. Его анатомические особенности, такие как удлинённая узкая голова с большими глазами, способствовали отличному восприятию глубины и высокой мобильности. Благодаря этим характеристикам он считался быстробегущим животным, способным эффективно охотиться на юрких животных своего времени.",
					Reference = "Да, целофизис был быстрым и ловким хищником."
				},
				//Токенов затрачено: 7874,
				new TestItem
				{
					Question = "Сколько метров достигал алиорам?",
					Generated = "Согласно первичному описанию Сергея Курзанова от 1976 года, алиорам достигал от **5 до 6 метров** в длину. Если эти образцы являются несовершеннолетними, то взрослые алиорамы могли достичь большей длины.",
					Reference = "Алиорам достигал длины около 5-6 метров."
				},
				//Токенов затрачено: 7821,
				new TestItem
				{
					Question = "У трицератопса были рога?",
					Generated = "Да, у трицератопса были рога. На его голове находилось три рога:  - Один небольшой рог на носу. - Два больших рога над глазами, которые могли достигать длины до 1,15 метра.",
					Reference = "Да, трицератопс имел три рога на голове. Один на носу и два над глазами"
				},
				//Токенов затрачено: 7809,
				new TestItem
				{
					Question = "Расскажи о трицератопсе",
					Generated = "У трицератопса (лат. Triceratops) были следующие особенности:  1. **Три рога**:    - Один короткий рог на носу;    - Два длинных рога над глазами, длиной до 1,15 метра.  2. **Крепкий череп**:    - Огромный череп, уступающий по размерам только Торозавру;    - Размер черепа молодых особей достигал 1 метра в длину, у крупных подростков до 1,6 метра, а у взрослых самцов более 2 метров.  3. **Сильные ноги**:    - Мощные ноги с сильными и мощными ногами;    - На передних более коротких конечностях было по три пальца, на задних - по четыре, все они заканчивались небольшими копытцами.  4. **Зубы и челюсти**:    - Зубы были собраны в группы (<батареи>), от 36 до 40 в каждой, на каждой челюстной кости от 3 до 5 батарей, в зависимости от возраста;    - Челюсти заканчивались узким и глубоким клювом, предназначенным для отрывания растений, а не пережёвывания пищи.  5. **Окаменелые останки кожи**:    - В 1986 году в штате Вайоминг были обнаружены остатки трицератопса по прозвищу \"Лэйн\", с крупными отпечатками фрагментов кожи - это первая известная находка ископаемой кожи трицератопса.  Эти особенности делали трицератопса крупным растительноядным динозавром с мощным телом и специфическим строением черепа и зубов.",
					Reference = "Трицератопс был большим травоядным динозавром, жившим в меловом периоде на территории современной Северной Америки. Он выделялся массивной головой с тремя рогами и костяным воротником, прикрывающим шею. Длина трицератопса могла достигать 8–9 метров, высота около 3 метров, а вес — от 60 до 120 тонн. Это были одни из самых распространённых растительноядных динозавров своего периода."
				},
				//Токенов затрачено: 8156,
				new TestItem
				{
					Question = "Какую длину достигал аллозавр?",
					Generated = "Аллозавр достигал длины примерно **7,5 метров** (около 25 футов).",
					Reference = "Аллозавр достигал длины примерно 7,5 метров."
				},
				//Токенов затрачено: 7774,
				new TestItem
				{
					Question = "Что ты знаешь о динозаврах?",
					Generated = "Я обладаю знаниями о следующих динозаврах:  ### Тираннозавроиды: - **Алиорам** (Alioramus):   - Мелкий хищный динозавр, обитавший в Монголии около 70 млн лет назад.   - Отличается удлиненным черепом, высоким носовым гребнем и большим числом зубов.   - Был обнаружен в начале 1970-х гг., описан в 1976 году.  - **Аллозавр** (Allosaurus):   - Крупный хищник из Северной Америки юрского периода (около 155-145 млн лет назад).   - Известен своим массивным черепом, коротким шеей, длинным хвостом и когтистыми передними конечностями.   - Один из наиболее изученных динозавров, известен по множеству находок.  ### Тероподы: - **Орнитолестес** (Ornitholestes):   - Маленький хищный динозавр юрского периода длиной примерно 2 метра.   - Обладал крепким черепом, длинными ногами и специализированными передними пальцами для захвата добычи.  ### Цератопсиды: - **Трицератопс** (Triceratops):   - Растительноядный динозавр конца мелового периода (около 68-66 млн лет назад).   - Характеризуется огромным черепом с тремя рогами и воротником.  ### Целурозавры: - **Целофиз** (Coelophysis):   - Мелкий хищный динозавр триасового периода (около 203-196 млн лет назад).   - Стройное животное с длинными ногами, гибкими руками и первыми известными признаками вилочки среди динозавров.  - **Целюр** (Coelurus):   - Хищный динозавр юрского периода, известный своими тонкими костями и длинными задними конечностями.  Эти описания охватывают основные характеристики каждого из упомянутых динозавров, их размеры, среду обитания, особенности строения и образ жизни.",
					Reference = "У меня есть сведения о нескольких видах динозавров. О каком-то из них вы хотите узнать подробности?"
				},
				//Токенов затрачено: 8266,
				new TestItem
				{
					Question = "Расскажи о тиранозавре",
					Generated = "Ваш запрос относится к семейству тираннозаврид, включающему такие виды, как **тираннозавр** (*Tyrannosaurus rex*).  ### Основные характеристики:  - **Размер**: Взрослый тираннозавр достигал примерно 12-13 метров в длину и весил от 6 до 9 тонн. - **Череп**: Череп тираннозавра составлял около 1,5-2 метров в длину, являлся мощным инструментом, способным наносить сокрушительные удары. - **Зубы**: Тираннозавр имел мощные, глубокие и острые зубы длиной до 30 см, способные прокусывать кости и ткани жертвы. - **Передвижение**: Ходил на двух мощных задних ногах, передвигаясь быстро и маневренно. - **Конечности**: Задние лапы были короткими, но чрезвычайно мощными, позволявшими эффективно передвигаться и атаковать. - **Хвост**: Мощный и тяжелый хвост служил противовесом телу, помогая сохранять равновесие при движении и нападении.  ### Питание и охота  Тираннозавр был плотоядным животным, специализирующимся на охоте на крупных травоядных динозавров, таких как трицератопсы, анкилозавры и гадрозавры. Его мощные челюсти и зубы позволяли легко разрывать плоть и дробить кости. Предполагается, что тираннозавр мог охотиться индивидуально или в группах, используя стратегию окружения и атаки с разных сторон.  ### Экология и поведение  Окаменелости тираннозавра были найдены преимущественно в Северной Америке, особенно в формациях позднего мелового периода. Эти динозавры обитали в разнообразных экосистемах, включая густые леса и открытые равнины. Они занимали доминирующее положение среди хищников своего времени, конкурируя с другими крупными хищниками, такими как аллозавры и спинозавры.  ### Открытие и изучение  Первые останки тираннозавра были обнаружены в 1902 году в Южной Дакоте. Их описание принадлежит американскому палеонтологу Барнуму Брауну, который назвал их *Tyrannosaurus rex*. Впоследствии было найдено множество экземпляров тираннозавра, ставшего символом гигантских плотоядных динозавров.  Таким образом, тираннозавр представляет собой впечатляющий пример крупного хищного динозавра, играющего ключевую роль в экосистеме позднего мелового периода.",
					Reference = "База знаний не содержит информации о тиранозавре."
				},
				//Токенов затрачено: 8327
			};
		}

		#endregion
	}
}
